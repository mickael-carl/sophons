- hosts: all
  tasks:
    - ansible.builtin.get_url:
        url: "https://raw.githubusercontent.com/eza-community/eza/main/deb.asc"
        dest: "/etc/apt/keyrings/gierens.asc"
    - ansible.builtin.get_url:
        url: "https://download.docker.com/linux/debian/gpg"
        dest: "/etc/apt/keyrings/docker.asc"
    # Prerequisite for Ansible to even support apt_repository.
    - ansible.builtin.apt:
        name:
          - gpg
    - ansible.builtin.apt_repository:
        repo: "deb [signed-by=/etc/apt/keyrings/gierens.asc] http://deb.gierens.de stable main"
    - apt_repository:
        repo: "deb [signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/debian bookworm stable"
    # Clean cache, otherwise we get different timestamps in it.
    - apt:
        clean: true
